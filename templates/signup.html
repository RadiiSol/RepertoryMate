<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Signup</title>
  <link rel="stylesheet" href=" {% static 'css/signup.css' %}" />
  <script src="{% static 'js/signup.js'%}" defer></script>
  <script src="https://kit.fontawesome.com/e7b026b0c8.js" crossorigin="anonymous"></script>

</head>

<body>
  <div class="container">
    <form action="{% url 'signup' %}" data-multi-step class="multi-step-form main-form" method="POST">
      {% csrf_token %}

      <!-- <ul id="progressbar">
          <li class="active">Account Setup</li>
          <li>Personal Details</li>
          <li>Medical Details</li>
        </ul> -->

       <div class="card" data-step>
        <h2 class="step-title">Create your account</h2>

        <div class="form-group">
          <input type="text" id="username" name="username" class="text-input" autocomplete="off"
            placeholder="Enter your Username" required minlength="3" onkeyup="check_username()" />
          <label for="username" class="label">Username</label>
        </div>

        <div class="form-group">
          <input type="text" id="firstName" name="firstname" class="text-input" autocomplete="off"
            placeholder="Enter your first name" required minlength="3"/>
          <label for="firstName" class="label">First Name</label>
        </div>

        <div class="form-group">
          <input type="text" id="lastName" name="lastname" class="text-input" autocomplete="off"
            placeholder="Enter your last name" />
          <label for="lastName" class="label">Last Name</label>
        </div>

        <div class="form-group">
          <input type="password" id="password" name="password" class="text-input" autocomplete="off"
            placeholder="Create a strong password" required onkeyup="check_password()" />
          <label for="password" class="label">Password</label>
        </div>

        <div class="form-group">
          <input type="password" id="confirm_password" name="confirm_password" class="text-input" autocomplete="off"
            placeholder="Re-enter your password" required onkeyup="check_password()" />
          <label for="confirm_password" class="label">Confirm Password</label>
        </div>

        <div class="form-group card_bottom">
          <p class="error" id="error1"></p>
          <button type="button" data-next id="next1">Next</button>
        </div>


      </div>


      <div class="card" data-step>

        <h2 class="step-title">Personal Details</h2>

        <div class="form-group">
          <input type="email" id="email" class="text-input" autocomplete="off" name="email"
            placeholder="Enter your Email address" required onkeyup="check_email()" />
          <label for="email" class="label">Email</label>
        </div>

        <div class="form-group">
          <input type="tel" id="mobile" class="text-input" pattern="[6-9]{1}[0-9]{9}" autocomplete="off" name="contact_number"
            placeholder="Enter 10 digit mobile number" required />
          <label for="mobile" class="label">Mobile number</label>
        </div>

        <div class="form-group">
          <input type="date" id="age" class="text-input" name="date_of_birth" required />
          <label for="age" class="label">Date of birth</label>
        </div>

        <div class="form-group">
          <div class="radiobutton">
            <h3>Your sex:</h3>
            <input type="radio" id="male" name="sex" class="radio-input" value="male" required />
            <label for="male" class="radiobtn">Male</label> <br />

            <input type="radio" id="female" name="sex" class="radio-input" value="female" required />
            <label for="female" class="radiobtn">Female</label> <br />

            <input type="radio" id="other" name="sex" class="radio-input" value="other" required />
            <label for="other" class="radiobtn">Others</label>
          </div>
        </div>

        <div class="form-group">
          <input type="text" id="occupation" class="text-input" name="occupation" placeholder="Specify your occupation"
            required minlength="3"/>
          <label for="occupation" class="label">Occupation</label>
        </div>

        <div class="form-group">
          <input type="text" id="address" class="text-input" minlength="3" name="address" placeholder="Permanent address" required />
          <label for="address" class="label">Address</label>
        </div>

        <div class="form-group">
          <div class="radiobutton">
            <h3>Marital status</h3>
            <input type="radio" id="married" name="marital_status" class="radio-input" value="married" required />
            <label for="married" class="radiobtn">Married</label> <br />

            <input type="radio" id="unmarried" name="marital_status" class="radio-input" value="unmarried" required />
            <label for="unmarried" class="radiobtn">Unmarried</label>
          </div>
        </div>

        <div class="form-group card_bottom2">

          <button type="button" data-previous id="previous1">Previous</button>
          <p id="error2"></p>
          <button type="button" data-next id="next2">Next</button>
        </div>
      </div>

      <div class="card" data-step>

        <h2 class="step-title">Medical Details</h2>

        <div class="form-group">
          <input type="number" id="height" class="text-input" name="height" placeholder="Your height(in cm)" required />
          <label for="height" class="label">Height</label>
        </div>

        <div class="form-group">
          <input type="number" id="weight" class="text-input" name="weight" placeholder="Your weight(in Kg)" required />
          <label for="weight" class="label">Weight</label>
        </div>

        <!-- Medical History -->
        <div class="form-group">
          <div class="checkbox_medical">
            <h3>Any history of</h3>





            <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="diabetes" name="medical_history"
              value="medical_history_diabetes" />
              <svg viewBox="0 0 64 64" height="1em" width="1em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="diabetes" class="check_label">Diabetes</label>
            </label>


             <br />

             <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="hypertension" name="medical_history"
              value="medical_history_hypertension" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="hypertension" class="check_label">Hypertension</label>
            </label>  


            <br />

            <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="thyroid" name="medical_history"
              value="medical_history_thyroid" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="thyroid" class="check_label">Thyroid</label>
            </label>


            <br />

            <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="tuberculosis" name="medical_history"
              value="medical_history_tuberculosis" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="tuberculosis" class="check_label">Tuberculosis</label>
            </label>


            <br />

            <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="asthma" name="medical_history"
              value="medical_history_asthma" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="asthma" class="check_label">Asthma</label>
            </label>

            <br />

            <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="infection" name="medical_history"
              value="medical_history_infection" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="infection" class="check_label">Infection</label>
            </label>

            <br />
          </div>
        </div>

        <!-- Narcotics_history -->
        <div class="form-group">
          <div class="checkbox_habit">
            <h3>What about your habits</h3>

            <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="smoking" name="narcotics_history"
              value="narcotics_history_smoking" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="smoking" class="check_label">Smoking</label> <br />
            </label>

             <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="drugs" name="narcotics_history"
              value="narcotics_history_drugs" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="drugs" class="check_label">Drugs</label> <br />
            </label>

             <label class="check-container">
              <input type="checkbox" class="custom-checkbox" id="alcohol" name="narcotics_history"
              value="narcotics_history_alcohol" />
              <svg viewBox="0 0 64 64" height="1.0em" width="1.0em">
                <path d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938" class="path"></path>
              </svg>
              <label for="alcohol" class="check_label">Alcohol</label>
            </label>
          </div>
        </div>

        <div class="form-group">
          <div class="radiobutton">
            <br />
            <h3>Do u play any sport?</h3>
            <input onClick="set_sports_text()" type="radio" id="yes" name="sports_bool" class="radio-input" value="yes"
              required />
            <label for="yes" class="radiobtn">Yes</label>
            <input type="text" id="sports_field" class="syes" placeholder="If 'Yes' specify the sport"
              name="sports_name" />
            <br />

            <input onClick="remove_sports_text()" type="radio" id="no" name="sports_bool" class="radio-input" value="no"
              required />
            <label for="no" class="radiobtn">No</label>
          </div>
        </div>

        <div class="form-group card_bottom3">
          <button type="button" data-previous>Previous</button>
          <button type="submit">Submit</button>
        </div>
      </div>

    </form>
  </div>
  <script>

    var all_user = {{ all_usernames| safe}};
    var all_mail = {{ user_email_array| safe}};
    var error1 = document.getElementById("error1");
    var error2 = document.getElementById("error2");
    var pass1 = document.getElementById('password');
    var pass2 = document.getElementById('confirm_password');
    var next1 = document.getElementById('next1');
    var next2 = document.getElementById('next2');
    var previous1 = document.getElementById('previous1');


    function check_username() {
      myuser = document.getElementById("username");

      if (all_user.includes(myuser.value)) {
        error1.innerHTML = "Username is taken";
        next1.style.display = "none";
      }
      else if (myuser.value.includes("@")) {
        error1.innerHTML = "@ cannot be in username";
        next1.style.display = "none";
      }
      else {
        error1.innerHTML = "";
        next1.style.display = "block";
      }
    }

    function check_email() {
      myemail = document.getElementById("email");

      if (all_mail.includes(myemail.value)) {
        error2.innerHTML = "Email address already exists in our system";
        next2.style.display = "none";
        previous1.style.display = "none";
      }
      else {
        error2.innerHTML = "";
        next2.style.display = "block";
        previous1.style.display = "block";
      }
    }

    function check_password() {

      pass_length = false;
      pass_match = false

      if (pass1.value.length > 6) {
        pass_length = true;
      }

      if (pass1.value == pass2.value) {
        pass_match = true;
      }

      if (!pass_length) {
        error1.innerHTML = "Password should be greater than 6 characters";
        next1.style.display = "none";
      }
      else if (!pass_match) {
        error1.innerHTML = "Passwords do not match";
        next1.style.display = "none";
      }
      else {
        error1.innerHTML = "";
        next1.style.display = "block";
      }

    }

    function set_sports_text() {

      x = document.getElementById("yes").checked;
      if (x == true) {
        document.getElementById("sports_field").required = true;
      }

    }

    function remove_sports_text() {

      document.getElementById("sports_field").required = false;

    }
  </script>

</body>

</html>